<!doctype html>
<html>
  
<!-- Mirrored from www.parsehub.com/docs/ref/api/v2/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 13 Mar 2019 02:13:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
					<script type="text/javascript" src="../../../../static/js/main.js"></script>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="../../../../static/images/phmini2.png"/>
    <title>ParseHub API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["plaintext","python","ruby","php","javascript","go"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div style="padding: 10px 20px; color: #fff; font-size: 20px; text-align: center;">
        <a href="../../../../index.html">
          <img src="images/parsehub_logo2_white.svg" width="192px">
        </a>
        API Reference
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="plaintext">curl</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="javascript">node</a>
              <a href="#" data-language-name="go">go</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='../../../../loginec27.html'>Get your API Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the ParseHub API documentation. ParseHub&rsquo;s API enables you to
programatically manage and run your projects and retrieve
extracted data.</p>

<p>The ParseHub API is designed around
<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a>.
It aims to have predictable URLs and uses HTTP verbs where possible.</p>

<p>To the right, you can find sample code in a variety of languages.
By default, curl is selected so that you can try out the commands in your terminal.</p>

<h2 id="authentication">Authentication</h2>

<p>Each request must include your API Key for authentication.
If you&rsquo;re logged in, the examples will have your API key filled in.</p>

<p>You can find your API Key on your <a href="../../../../loginec27.html">account page</a></p>

<h2 id="requests">Requests</h2>

<p><code class="prettyprint">POST</code> requests must have a form-encoded body and the <code class="prettyprint">Content-Type: application/x-www-form-urlencoded; charset=utf-8</code> header.</p>

<p><code class="prettyprint">GET</code> requests must be <a href="http://en.wikipedia.org/wiki/Percent-encoding">url-encoded</a></p>

<p>All requests must be made over HTTPS. Any HTTP requests are responded to
with a HTTP 302 to the equivalent HTTPS address.</p>

<p>If you are using the curl examples, make sure that any data you replace is
properly shell-escaped.</p>

<p>ParseHub limits API usage to 5 requests per second, with any requests thereafter being queued up to a maximum of 25 requests
per second. Requests thereafter will return a 429 status code.</p>

<h2 id="responses">Responses</h2>

<p>Unless explicitly mentioned,
<a href="http://en.wikipedia.org/wiki/JSON">JSON</a>
will be returned in all responses.</p>

<h2 id="errors">Errors</h2>

<p>ParseHub returns standard HTTP errors when possible.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>The ParseHub API may be changed in a backwards-compatible way at any time.
Backwards compatibility means that new methods, objects, statuses,
fields in responses, etc. may be added at any time,
but existing ones <strong>will never be renamed or removed</strong>.</p>

<p>If there are backward incompatible changes that need to be made to our API,
we will release a new API version. The previous API version will be maintained
for a year after releasing the new version.</p>

<h2 id="client-libraries">Client Libraries</h2>

<p>Some developers in the community have built unofficial client libraries for
using ParseHub in various development environments. ParseHub makes no
guarantees as to their quality.</p>

<h3 id="python">Python</h3>

<p><a href="https://github.com/hronecviktor/py-parsehub">py-parsehub</a></p>

<h3 id="php">PHP</h3>

<p><a href="https://github.com/msankhala/parsehub-php">parsehub-php</a></p>

<h3 id="node">Node</h3>

<p><a href="https://github.com/snez/parsehub">parsehub</a></p>

<h3 id="c">C</h3>

<p><a href="https://github.com/amcdonald0214/ParseHub-CSharp">ParseHub-CSharp</a></p>

<h3 id="go">Go</h3>

<p><a href="https://github.com/mb24dev/parsehub">parsehub</a></p>

<p>If you&rsquo;ve written a client library (with a corporate-friendly license)
that you&rsquo;d like added to this list, please <a href="../../../../contact.html">contact us</a>.</p>

<h1 id="objects">Objects</h1>

<p>There are two primary types of objects that the ParseHub API operates with.</p>

<h2 id="project">Project</h2>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Project"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"templates_json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;LARGE_JSON_STRING_HERE&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"main_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"main_site"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"options_json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"loadJs\":true,\"rotateIPs\":false,\"maxWorkers\":\"1\",\"startingValue\":\"{}\"}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_run"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tRdThBFSU7CWKAQtjAqUzZWy"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_ready_run"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tglTFX7IFQlrAl7W6fl1GRjw"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This object represents a project that was created using the ParseHub
client. It has the following properties:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>token</strong></td>
<td>A globally unique id representing this project.</td>
</tr>
<tr>
<td><strong>title</strong></td>
<td>The title give by the user when creating this project.</td>
</tr>
<tr>
<td><strong>templates_json</strong></td>
<td>The JSON-stringified representation of all the instructions for running this project. This representation is not yet documented, but will eventually allow developers to create plugins for ParseHub.</td>
</tr>
<tr>
<td><strong>main_template</strong></td>
<td>The name of the template with which ParseHub should start executing the project.</td>
</tr>
<tr>
<td><strong>main_site</strong></td>
<td>The default URL at which ParseHub should start running the project.</td>
</tr>
<tr>
<td><strong>options_json</strong></td>
<td>An object containing several advanced options for the project.</td>
</tr>
<tr>
<td><strong>last_run</strong></td>
<td>The run object of the most recently started run (orderd by <code class="prettyprint">start_time</code>) for the project.</td>
</tr>
<tr>
<td><strong>last_ready_run</strong></td>
<td>The run object of the most recent ready run (ordered by <code class="prettyprint">start_time</code>) for the project. A ready run is one whose <code class="prettyprint">data_ready</code> attribute is truthy. The <code class="prettyprint">last_run</code> and <code class="prettyprint">last_ready_run</code> for a project may be the same.</td>
</tr>
</tbody></table>

<h2 id="run">Run</h2>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:10:40"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f82f56816560943564803e005cb71d26"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>This object represents an instance of a project that was run at a given
time with a given set of parameters. It has the following properties:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>project_token</strong></td>
<td>A globally unique id representing the project that this run belongs to.</td>
</tr>
<tr>
<td><strong>run_token</strong></td>
<td>A globally unique id representing this run.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>The status of the run. It can be one of <code class="prettyprint">initialized</code>, <code class="prettyprint">queued</code>, <code class="prettyprint">running</code>, <code class="prettyprint">cancelled</code>, <code class="prettyprint">complete</code>, or <code class="prettyprint">error</code>.</td>
</tr>
<tr>
<td><strong>data_ready</strong></td>
<td>Whether the data for this run is ready to download. If the status is <code class="prettyprint">complete</code>, this will always be truthy. If the status is <code class="prettyprint">cancelled</code> or <code class="prettyprint">error</code>, then this may be truthy or falsy, depending on whether any data is available.</td>
</tr>
<tr>
<td><strong>start_time</strong></td>
<td>The time that this run was started at, in UTC +0000.</td>
</tr>
<tr>
<td><strong>end_time</strong></td>
<td>The time that this run was stopped. This field will be null if the run is either <code class="prettyprint">initialized</code> or <code class="prettyprint">running</code>. Time is in UTC +0000.</td>
</tr>
<tr>
<td><strong>pages</strong></td>
<td>The number of pages that have been traversed by this run so far.</td>
</tr>
<tr>
<td><strong>md5sum</strong></td>
<td>The md5sum of the results. This can be used to check if any results data has changed between two runs.</td>
</tr>
<tr>
<td><strong>start_url</strong></td>
<td>The url that this run was started on.</td>
</tr>
<tr>
<td><strong>start_template</strong></td>
<td>The template that this run was started with.</td>
</tr>
<tr>
<td><strong>start_value</strong></td>
<td>The starting value of the global scope for this run.</td>
</tr>
</tbody></table>

<h1 id="methods">Methods</h1>

<p>This section describes all of the HTTP endpoints that can be used to manipulate
projects and runs.</p>

<p>The typical way to use the ParseHub API is the following:</p>

<ol>
<li><p><strong>Start a run</strong></p>

<p>This is done by one of the following:</p>

<ol>
<li>Running the project from the ParseHub client,</li>
<li>Setting up a schedule (also in the client) for runs to be
started automatically,</li>
<li>Using the <a href="#run-a-project"><code class="prettyprint">POST /api/v2/projects/{PROJECT_TOKEN}/run</code></a>
method below.
<br/><br/></li>
</ol></li>
<li><p><strong>Wait for the run to finish</strong></p>

<p>You can use one of:</p>

<ol>
<li><a href="#webhooks">Webhooks</a> (recommended)</li>
<li>Polling the <a href="#get-a-run"><code class="prettyprint">GET /api/v2/runs/{RUN_TOKEN}</code></a> method below.
Note there are rate limits on this method.
<br/><br/></li>
</ol>

<p>For simple use cases, you can skip this step entirely by using the
<a href="#get-last-ready-data"><code class="prettyprint">GET /api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data</code></a>
method.</p></li>
<li><p><strong>Get the data from the run</strong></p>

<p>Once the run&rsquo;s <code class="prettyprint">data_ready</code> is truthy, you can:</p>

<ol>
<li>Download the data from either the ParseHub client or website.</li>
<li>Use the <a href="#get-data-for-a-run"><code class="prettyprint">GET /api/v2/runs/{RUN_TOKEN}/data</code></a> method
below.</li>
<li>For simple use cases, the
<a href="#get-last-ready-data"><code class="prettyprint">GET /api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data</code></a>
method. This will automatically get the data from the most recent run
where <code class="prettyprint">data_ready</code> is truthy.</li>
</ol></li>
</ol>

<h2 id="get-a-project">Get a project</h2>
<pre><code class="highlight plaintext">curl -X GET "https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}?api_key={YOUR_API_KEY}&amp;offset=0&amp;include_options=1"
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s">"offset"</span><span class="p">:</span> <span class="s">"0"</span><span class="p">,</span>
  <span class="s">"include_options"</span><span class="p">:</span> <span class="s">"1"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="ss">:offset</span> <span class="o">=&gt;</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="ss">:include_options</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s2">"offset"</span> <span class="o">=&gt;</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="s2">"include_options"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">));</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span>
    <span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}?'</span><span class="o">.</span><span class="nv">$params</span><span class="p">,</span>
    <span class="kc">false</span><span class="p">,</span>
    <span class="nb">stream_context_create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'GET'</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
    <span class="na">include_options</span><span class="p">:</span> <span class="s2">"1"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"offset"</span><span class="p">,</span><span class="x"> </span><span class="s">"0"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"include_options"</span><span class="p">,</span><span class="x"> </span><span class="s">"1"</span><span class="p">)</span><span class="x">
  </span><span class="n">Url</span><span class="o">.</span><span class="n">RawQuery</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">params</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">())</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Project"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"templates_json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;LARGE_JSON_STRING_HERE&gt;"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"main_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"main_site"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"options_json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"loadJs\":true,\"rotateIPs\":false,\"maxWorkers\":\"1\",\"startingValue\":\"{}\"}"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"last_run"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:10:02"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f82f56816560943564803e005cb71d26"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"last_ready_run"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:10:02"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f82f56816560943564803e005cb71d26"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"run_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:10:02"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f82f56816560943564803e005cb71d26"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will return the project object for a specific project.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
<tr>
<td><strong>offset</strong> <em>(Optional)</em></td>
<td>Specifies the offset from which to start the <code class="prettyprint">run_list</code>. E.g. in order to get most recent runs 21-40, specify an offset of 20. Defaults to 0.</td>
</tr>
<tr>
<td><strong>include_options</strong> <em>(Optional)</em></td>
<td>Includes the &ldquo;options_json&rdquo; key in the result returned.  For performance reasons, we exclude this key by default.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns the project identified by {PROJECT_TOKEN}. The project
will have an additional <code class="prettyprint">run_list</code> attribute which has a list of the most
recent 20 runs, starting at the <code class="prettyprint">offset</code>th most recent. The <code class="prettyprint">run_list</code> has
no order guarantees; you must sort it yourself if you&rsquo;d like to have it
sorted by some attribute.</p>

<h2 id="run-a-project">Run a project</h2>
<pre><code class="highlight plaintext">curl "https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run"   -X POST \ 
  -d api_key={YOUR_API_KEY} \ 
  -d start_url=http%3A%2F%2Fwww.example.com \ 
  -d start_template=main_template \ 
  -d start_value_override=%7B%22query%22%3A+%22San+Francisco%22%7D \ 
  -d send_email=1
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s">"start_url"</span><span class="p">:</span> <span class="s">"http://www.example.com"</span><span class="p">,</span>
  <span class="s">"start_template"</span><span class="p">:</span> <span class="s">"main_template"</span><span class="p">,</span>
  <span class="s">"start_value_override"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">query</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">San Francisco</span><span class="se">\"</span><span class="s">}"</span><span class="p">,</span>
  <span class="s">"send_email"</span><span class="p">:</span> <span class="s">"1"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="ss">:start_url</span> <span class="o">=&gt;</span> <span class="s2">"http://www.example.com"</span><span class="p">,</span>
  <span class="ss">:start_template</span> <span class="o">=&gt;</span> <span class="s2">"main_template"</span><span class="p">,</span>
  <span class="ss">:start_value_override</span> <span class="o">=&gt;</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">query</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">San Francisco</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span>
  <span class="ss">:send_email</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">post_form</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s2">"start_url"</span> <span class="o">=&gt;</span> <span class="s2">"http://www.example.com"</span><span class="p">,</span>
  <span class="s2">"start_template"</span> <span class="o">=&gt;</span> <span class="s2">"main_template"</span><span class="p">,</span>
  <span class="s2">"start_value_override"</span> <span class="o">=&gt;</span> <span class="s2">"{\"</span><span class="nx">query\</span><span class="s2">": </span><span class="se">\"</span><span class="s2">San Francisco</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span>
  <span class="s2">"send_email"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">);</span>

<span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'POST'</span><span class="p">,</span>
    <span class="s1">'header'</span> <span class="o">=&gt;</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded; charset=utf-8'</span><span class="p">,</span>
    <span class="s1">'content'</span> <span class="o">=&gt;</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$context</span> <span class="o">=</span> <span class="nb">stream_context_create</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">form</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
    <span class="na">start_url</span><span class="p">:</span> <span class="s2">"http://www.example.com"</span><span class="p">,</span>
    <span class="na">start_template</span><span class="p">:</span> <span class="s2">"main_template"</span><span class="p">,</span>
    <span class="na">start_value_override</span><span class="p">:</span> <span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="p">,</span>
    <span class="na">send_email</span><span class="p">:</span> <span class="s2">"1"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"start_url"</span><span class="p">,</span><span class="x"> </span><span class="s">"http://www.example.com"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"start_template"</span><span class="p">,</span><span class="x"> </span><span class="s">"main_template"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"start_value_override"</span><span class="p">,</span><span class="x"> </span><span class="s">"{</span><span class="se">\"</span><span class="s">query</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">San Francisco</span><span class="se">\"</span><span class="s">}"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"send_email"</span><span class="p">,</span><span class="x"> </span><span class="s">"1"</span><span class="p">)</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">PostForm</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span><span class="x"> </span><span class="n">params</span><span class="p">)</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initialized"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will start running an instance of the project on the ParseHub cloud. It will create a new run object. This method will return immediately, while the run continues in the background. You can use webhooks or polling to figure out when the data for this run is ready in order to retrieve it.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/run</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
<tr>
<td><strong>start_url</strong> <em>(Optional)</em></td>
<td>The url to start running on. Defaults to the project&rsquo;s <code class="prettyprint">start_site</code>.</td>
</tr>
<tr>
<td><strong>start_template</strong> <em>(Optional)</em></td>
<td>The template to start running with. Defaults to the projects&rsquo;s <code class="prettyprint">start_template</code> (inside the <code class="prettyprint">options_json</code>).</td>
</tr>
<tr>
<td><strong>start_value_override</strong> <em>(Optional)</em></td>
<td>The starting global scope for this run. This can be used to pass parameters to your run. For example, you can pass <code class="prettyprint">{&quot;query&quot;: &quot;San Francisco&quot;}</code> to use the query somewhere in your run. Defaults to the project&rsquo;s <code class="prettyprint">start_value</code>.</td>
</tr>
<tr>
<td><strong>send_email</strong> <em>(Optional)</em></td>
<td>If set to anything other than <code class="prettyprint">0</code>, send an email when the run either completes successfully or fails due to an error. Defaults to <code class="prettyprint">0</code>.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns the run object that was created.</p>

<h2 id="list-all-projects">List all projects</h2>
<pre><code class="highlight plaintext">curl -X GET "https://www.parsehub.com/api/v2/projects?api_key={YOUR_API_KEY}&amp;offset=0&amp;limit=20&amp;include_options=1"
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s">"offset"</span><span class="p">:</span> <span class="s">"0"</span><span class="p">,</span>
  <span class="s">"limit"</span><span class="p">:</span> <span class="s">"20"</span><span class="p">,</span>
  <span class="s">"include_options"</span><span class="p">:</span> <span class="s">"1"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.parsehub.com/api/v2/projects'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="ss">:offset</span> <span class="o">=&gt;</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="ss">:limit</span> <span class="o">=&gt;</span> <span class="s2">"20"</span><span class="p">,</span>
  <span class="ss">:include_options</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/projects'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s2">"offset"</span> <span class="o">=&gt;</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="s2">"limit"</span> <span class="o">=&gt;</span> <span class="s2">"20"</span><span class="p">,</span>
  <span class="s2">"include_options"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">));</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span>
    <span class="s1">'https://www.parsehub.com/api/v2/projects?'</span><span class="o">.</span><span class="nv">$params</span><span class="p">,</span>
    <span class="kc">false</span><span class="p">,</span>
    <span class="nb">stream_context_create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'GET'</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/projects'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
    <span class="na">limit</span><span class="p">:</span> <span class="s2">"20"</span><span class="p">,</span>
    <span class="na">include_options</span><span class="p">:</span> <span class="s2">"1"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/projects"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"offset"</span><span class="p">,</span><span class="x"> </span><span class="s">"0"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"limit"</span><span class="p">,</span><span class="x"> </span><span class="s">"20"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"include_options"</span><span class="p">,</span><span class="x"> </span><span class="s">"1"</span><span class="p">)</span><span class="x">
  </span><span class="n">Url</span><span class="o">.</span><span class="n">RawQuery</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">params</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">())</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"projects"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Project"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"templates_json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;LARGE_JSON_STRING_HERE&gt;"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"main_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"main_site"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"options_json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"loadJs\":true,\"rotateIPs\":false,\"maxWorkers\":\"1\",\"startingValue\":\"{}\"}"</span><span class="p">,</span><span class="w"> 
      </span><span class="s2">"last_run"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:10:02"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f82f56816560943564803e005cb71d26"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
      </span><span class="p">},</span><span class="w"> 
      </span><span class="s2">"last_ready_run"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:10:02"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f82f56816560943564803e005cb71d26"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This gets a list of projects in your account</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.parsehub.com/api/v2/projects</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
<tr>
<td><strong>offset</strong> <em>(Optional)</em></td>
<td>Specifies the offset from which to start the <code class="prettyprint">projects</code>. E.g. in order to get projects 21-40, specify an offset of 20. Defaults to 0.</td>
</tr>
<tr>
<td><strong>limit</strong> <em>(Optional)</em></td>
<td>Specifies how many entries will be returned in <code class="prettyprint">projects</code>.  Accepts values between 1 and 20 inclusively. Defaults to 20.</td>
</tr>
<tr>
<td><strong>include_options</strong> <em>(Optional)</em></td>
<td>Adds options_json, main_template, main_site and webhook to the entries of <code class="prettyprint">projects</code>. Set this parameter to 1 if you intend to use them in ParseHub API calls. This parameter requires use of the <code class="prettyprint">offset</code> and <code class="prettyprint">limit</code> parameters to access the full list of projects.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns an object with</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>projects</strong></td>
<td>A list of the projects in your account.</td>
</tr>
<tr>
<td><strong>total_projects</strong></td>
<td>The total number of projects in your account.</td>
</tr>
</tbody></table>

<h2 id="get-a-run">Get a run</h2>
<pre><code class="highlight plaintext">curl -X GET "https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}?api_key={YOUR_API_KEY}"
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span>
<span class="p">));</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span>
    <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}?'</span><span class="o">.</span><span class="nv">$params</span><span class="p">,</span>
    <span class="kc">false</span><span class="p">,</span>
    <span class="nb">stream_context_create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'GET'</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">Url</span><span class="o">.</span><span class="n">RawQuery</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">params</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">())</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initialized"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This returns the run object for a given run token. You can call this method repeatedly to poll for when a run is done, though we recommend using a webhook instead. This method is rate-limited. For each run, you may make at most 25 calls during the first 5 minutes after the run started, and at most one call every 3 minutes after that.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns the run identified by {RUN_TOKEN}</p>

<h2 id="get-data-for-a-run">Get data for a run</h2>
<pre><code class="highlight plaintext">curl -X GET "https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data?api_key={YOUR_API_KEY}&amp;format=csv" | gunzip
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s">"format"</span><span class="p">:</span> <span class="s">"csv"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="s2">"csv"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s2">"format"</span> <span class="o">=&gt;</span> <span class="s2">"csv"</span>
<span class="p">));</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span>
    <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data?'</span><span class="o">.</span><span class="nv">$params</span><span class="p">,</span>
    <span class="kc">false</span><span class="p">,</span>
    <span class="nb">stream_context_create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'GET'</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">gzip</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
    <span class="na">format</span><span class="p">:</span> <span class="s2">"csv"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"format"</span><span class="p">,</span><span class="x"> </span><span class="s">"csv"</span><span class="p">)</span><span class="x">
  </span><span class="n">Url</span><span class="o">.</span><span class="n">RawQuery</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">params</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">())</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">"questions_title", "questions_text"

"This is a title", "This is some text"

"This is another title", "This is another text"
</code></pre>

<p>This returns the data that was extracted by a run.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/data</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
<tr>
<td><strong>format</strong> <em>(Optional)</em></td>
<td>The format that you would like to get the data in. Possible values <code class="prettyprint">csv</code> or <code class="prettyprint">json</code>. Defaults to <code class="prettyprint">json</code>.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns the data in either <code class="prettyprint">csv</code> or <code class="prettyprint">json</code> format, depending on
the <code class="prettyprint">format</code> parameter.</p>

<p><strong>Note: The Content-Encoding of this response is always <code class="prettyprint">gzip</code>.</strong></p>

<h2 id="get-last-ready-data">Get last ready data</h2>
<pre><code class="highlight plaintext">curl -X GET "https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data?api_key={YOUR_API_KEY}&amp;format=csv" | gunzip
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s">"format"</span><span class="p">:</span> <span class="s">"csv"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="s2">"csv"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
  <span class="s2">"format"</span> <span class="o">=&gt;</span> <span class="s2">"csv"</span>
<span class="p">));</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span>
    <span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data?'</span><span class="o">.</span><span class="nv">$params</span><span class="p">,</span>
    <span class="kc">false</span><span class="p">,</span>
    <span class="nb">stream_context_create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'GET'</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">gzip</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span><span class="p">,</span>
    <span class="na">format</span><span class="p">:</span> <span class="s2">"csv"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"format"</span><span class="p">,</span><span class="x"> </span><span class="s">"csv"</span><span class="p">)</span><span class="x">
  </span><span class="n">Url</span><span class="o">.</span><span class="n">RawQuery</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">params</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">())</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight plaintext">"questions_title", "questions_text"

"This is a title", "This is some text"

"This is another title", "This is another text"
</code></pre>

<p>This returns the data for the most recent ready run for a project. You can use this method in order to have a synchronous interface to your project.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.parsehub.com/api/v2/projects/{PROJECT_TOKEN}/last_ready_run/data</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
<tr>
<td><strong>format</strong> <em>(Optional)</em></td>
<td>The format that you would like to get the data in. Possible values <code class="prettyprint">csv</code> or <code class="prettyprint">json</code>. Defaults to <code class="prettyprint">json</code>.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns the data in either <code class="prettyprint">csv</code> or <code class="prettyprint">json</code> format, depending on
the <code class="prettyprint">format</code> parameter.</p>

<p><strong>Note: The Content-Encoding of this response is always <code class="prettyprint">gzip</code>.</strong></p>

<h2 id="cancel-a-run">Cancel a run</h2>
<pre><code class="highlight plaintext">curl "https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel"   -X POST \ 
  -d api_key={YOUR_API_KEY}
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">post_form</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span>
<span class="p">);</span>

<span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'POST'</span><span class="p">,</span>
    <span class="s1">'header'</span> <span class="o">=&gt;</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded; charset=utf-8'</span><span class="p">,</span>
    <span class="s1">'content'</span> <span class="o">=&gt;</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span>
  <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$context</span> <span class="o">=</span> <span class="nb">stream_context_create</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">form</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">PostForm</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span><span class="x"> </span><span class="n">params</span><span class="p">)</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-02-03T23:09:38"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"project_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-0WMEZ-Bc9sWGHAMsYvP7y4"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main_template"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"data_ready"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"md5sum"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"start_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{\"query\": \"San Francisco\"}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This cancels a run and changes its status to <code class="prettyprint">cancelled</code>. Any data that was extracted so far will be available.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}/cancel</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns the run identified by {RUN_TOKEN}</p>

<h2 id="delete-a-run">Delete a run</h2>
<pre><code class="highlight plaintext">curl -X DELETE "https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}?api_key={YOUR_API_KEY}"
</code></pre>
<pre><code class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"api_key"</span><span class="p">:</span> <span class="s">"{YOUR_API_KEY}"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}'</span><span class="p">)</span>
<span class="n">url</span><span class="p">.</span><span class="nf">query</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">encode_www_form</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s2">"{YOUR_API_KEY}"</span>
<span class="p">));</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span>
    <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}?'</span><span class="o">.</span><span class="nv">$params</span><span class="p">,</span>
    <span class="kc">false</span><span class="p">,</span>
    <span class="nb">stream_context_create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'http'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'DELETE'</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="nx">request</span><span class="p">({</span>
  <span class="na">uri</span><span class="p">:</span> <span class="s1">'https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">api_key</span><span class="p">:</span> <span class="s2">"{YOUR_API_KEY}"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre><code class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"net/url"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">Url</span><span class="x"> </span><span class="o">*</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="x">
  </span><span class="n">Url</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="s">"https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}"</span><span class="p">)</span><span class="x">

  </span><span class="n">params</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">{}</span><span class="x">
  </span><span class="n">params</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"api_key"</span><span class="p">,</span><span class="x"> </span><span class="s">"{YOUR_API_KEY}"</span><span class="p">)</span><span class="x">
  </span><span class="n">Url</span><span class="o">.</span><span class="n">RawQuery</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">params</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Delete</span><span class="p">(</span><span class="n">Url</span><span class="o">.</span><span class="n">String</span><span class="p">())</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"run_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tCcB4hfFP6wvBRe2gwZv9aJp"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This cancels a run if running, and deletes the run and its data.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://www.parsehub.com/api/v2/runs/{RUN_TOKEN}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>api_key</strong></td>
<td>The API key for your account.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, returns an object with</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>run_token</strong></td>
<td>The <code class="prettyprint">run_token</code> of the run that was deleted.</td>
</tr>
</tbody></table>

<h1 id="webhooks">Webhooks</h1>

<p>ParseHub has webhooks which you can use to get notified about the status of
a project&rsquo;s runs. You can use webhooks instead of having to write logic for
polling the status of a run.</p>

<p>You can set up a webhook for a project in the &lsquo;Settings&rsquo; tab of the project in
the ParseHub client. This should be a valid URL that is visible from the internet.</p>

<p>ParseHub will send a POST request to that url whenever any of the project&rsquo;s
runs&rsquo; <code class="prettyprint">status</code> or
<code class="prettyprint">data_ready</code> fields change. The POST body will be the run object.</p>

<p>If the status of a run is <code class="prettyprint">error</code>, ParseHub may automatically retry the run if
it thinks there&rsquo;s a good chance that the run will succeed the second time. In
this case, there will be an additional <code class="prettyprint">new_run</code> field with the metadata
(run token, etc.) for the restarted run.</p>

<p>We will retry every request once per hour up to 3 times or until we
get an HTTP 200 response.</p>

<p>Note that this is a traditional POST with valid JSON data encoded as <code class="prettyprint">application/x-www-form-urlencoded</code>.
You can test your endpoint with: <code class="prettyprint">curl -X POST [webhook url] -H &quot;Content-Type: application/x-www-form-urlencoded&quot; -d &#39;{&quot;some&quot;: &quot;json&quot;}&#39;</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="plaintext">curl</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="javascript">node</a>
                <a href="#" data-language-name="go">go</a>
          </div>
      </div>
    </div>
  </body>

<!-- Mirrored from www.parsehub.com/docs/ref/api/v2/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 13 Mar 2019 02:13:10 GMT -->
</html>
